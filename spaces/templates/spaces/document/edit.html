{% extends "spaces/layout.html" %}

{% load staticfiles %}

{% block page_title %}{% block title %}Edit Document{% endblock %}{% endblock %}
{% block page_classes %}
  document-form {% if document.id %}document-add{%else%}document-edit{%endif%}
{% endblock %}

{% block page_nav %}
  <li class="slide-in">
    <a href="#" class="fa fa-save" title="Save">
      Save</a>
  </li>
  <li class="slide-in">
    <a href="{% url 'spaces:document' path=request.resolver_match.kwargs.path %}" class="fa fa-ban" title="Cancel">
      Cancel</a>
  </li>
  {% if document.id and not document.is_space_root %}
    <li class="delete-document secondary slide-in">
      <form action="{% url 'spaces:document_delete' document.id %}" id="delete-document-form" method="POST">
        {% csrf_token %}
        <button class="fa fa-trash-o" title="Delete" type="submit">
          Delete</button>
      </form>
    </li>
  {% endif %}
{% endblock %}

{% block content %}
  <form action="{{ request.get_full_path }}" method="post" class="document-form">
    {% if document.id %}
      Edit this document
    {% else %}
      Add new document
    {% endif %}
    {% csrf_token %}
    {{ form.as_p }}
    {{ revision_form.as_p }}
    <script type="text/javascript">
        CKEDITOR.replace('id_revision_set-0-content');
    </script>
    <p>
      <button type="submit">Save</button>
    </p>
  </form>

  <script type="text/javascript" src="{% static 'spaces/js/edit_doc.js' %}"></script>
{% endblock %}